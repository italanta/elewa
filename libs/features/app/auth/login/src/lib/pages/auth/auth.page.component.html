<div *ngIf="user$ | async; else showLogin">
  <app-spinner></app-spinner>
</div>

<ng-template #showLogin>
  <div class="auth-page">
    <div class="auth-card" fxLayout="row" fxLayoutAlign="start start">

      <div class="login-page-info" fxFlex="65">
        <div class="image-container">
          <img src="https://res.cloudinary.com/dyl3rncv3/image/upload/v1699438630/Goomza/login_jvcyqp-min_bjkj89.jpg" class="image">
          <div class="overlay"></div>
        </div>

        <div class="top-left">
          <img class="clm-logo" src="assets/icons/goomza-icon-transparent.png">
        </div>

        <div class="bottom-left">
          <p class="title">
            Goomza simplifies course creation and learner engagement effortlessly
          </p>

          <p class="sub-title">
            Track your chat bots and engage your audience in real-time with our user-friendly interface
          </p>
        </div>
      </div>

      <div class="login-form" fxFlex="35">
        <div fxLayout="column" fxLayoutAlign="start" fxFlex>

          <img class="clm-logo" src="assets/icons/goomza-logo-colored-transparent.png">

          <div class="actions" fxLayout="column" fxLayoutAlign="start">
            <span *ngIf="!isLogin" class="action-title"> Create an Account </span>
            <span *ngIf="!isLogin" class="action-desc"> Sign up to create a world of engaging learning experiences
            </span>

            <span *ngIf="isLogin" class="action-title"> Log In </span>
            <span *ngIf="isLogin" class="action-desc"> Welcome back! Please enter your details </span>

          </div>

          <div fxFlex>
            <div label="Log In">
              <span *ngIf="isLogin; else registerPage" fxFlex>
                <app-login (createAccount)="createAccount()" fxFlex></app-login>
              </span>
            </div>
            <div label="Create Account">
              <ng-template #registerPage>
                <span fxFlex>
                  <app-register></app-register>
                </span>
              </ng-template>
            </div>
          </div>

          <div class="action-buttons" fxLayout="column" fxLayoutAlign="start">
            <button mat-stroked-button color="primary" (click)="logInWithGoogle()">
              <mat-icon>
                <img src="assets/images/google-logo.png">
              </mat-icon>
              <span *ngIf="isLogin"> Login With Google </span>
              <span *ngIf="!isLogin"> Sign Up With Google </span>
            </button>
            <!-- <button mat-stroked-button color="primary" (click)="logInWithFaceBook()">
              <mat-icon>
                <img src="assets/images/facebook-logo.png">
              </mat-icon>
              <span *ngIf="isLogin">Login with Facebook </span>
              <span *ngIf="!isLogin">Sign Up with Facebook </span>
            </button> -->
          </div>

          <div style="margin-top: 10px;" *ngIf="isLogin; else registerNav" fxLayout="row" fxLayoutAlign="center center"
            fxFlex>
            <span style="font-weight: 400;">
              Don't have an account?
            </span>
            <div class="highlight-button" style="margin-left: 5px;" mat-button color="primary" (click)="toggleMode()">
              <span style="text-decoration: underline;">Create an Account</span>
            </div>            
          </div>

          <ng-template #registerNav>
            <div style="margin-top: 10px;" fxLayout="row" fxLayoutAlign="center center" fxFlex>
              <span style= "font-weight: 100;">
                Already have an account?
              </span>
              <div class="log-in" mat-button color="primary" (click)="toggleModeLogin()">
                <span style="text-decoration: underline;">Log In</span>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</ng-template>