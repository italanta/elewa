<mat-card [id]="id" *ngIf="multipleInputMessageBlock">
  <mat-card-content>
    <form [formGroup]="multipleInputMessageBlock" fxLayout="column" fxLayoutALign="start center">

      <textarea id="message" name="message" formControlName="message" type="text" rows="3"></textarea>
      
      <app-default-option-field [jsPlumb]="jsPlumb" [blockFormGroup]="multipleInputMessageBlock"></app-default-option-field>

      <div formArrayName="options" fxFlexFill>
        <div *ngFor="let option of options.controls; let groupIndex = index" class="full-width" fxFlexFill>
          <div fxLayout="column" fxLayoutALign="start">
            <span [formGroupName]="groupIndex" fxFlex>
              <div formArrayName="values" >
                <div *ngFor="let grpControls of getGroupControls(groupIndex).controls; let fIndex = index">
                  <input [formControlName]="fIndex">
                </div>
              </div>
            </span>
  
            <button (click)="addNewOption(groupIndex)" mat-flat-button class="add-button">
              Add Option
            </button>
          </div>
        </div>
      </div>
    </form>

    <button (click)="addNewOptionGroup()" mat-flat-button class="add-button">
      New List
    </button>
  </mat-card-content>
</mat-card>
