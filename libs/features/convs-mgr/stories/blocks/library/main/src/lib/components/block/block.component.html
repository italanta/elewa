<mat-card  class="card" [id]="id" class="block-card">
    <div [id]="id" [ngSwitch]="type" (mouseenter)="highLight()" (mouseleave)="removeHighlight()"  (contextmenu)="onRightClick($event)">
        <div *ngIf="type !== endStoryAnchor" class="outer">
            <div class="block-title-container"> 
                <ng-container *ngIf="svgIcon; else showIcon">
                    <img [src]="svgIcon" class="svgIcon">
                </ng-container>
                <ng-template #showIcon>
                    <i [class]="iconClass" class="icon-color"></i>
                </ng-template>                
                <h4 class="block-title"> {{ blockTitle | transloco }}</h4>
                    <p *ngIf="hasRightClick" class="copy-to-clipboard" (click)="copyBlockId()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H14.82C14.4 1.84 13.3 1 12 1C10.7 1 9.6 1.84 9.18 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V5C21 4.46957 20.7893 3.96086 20.4142 3.58579C20.0391 3.21071 19.5304 3 19 3ZM12 3C12.2652 3 12.5196 3.10536 12.7071 3.29289C12.8946 3.48043 13 3.73478 13 4C13 4.26522 12.8946 4.51957 12.7071 4.70711C12.5196 4.89464 12.2652 5 12 5C11.7348 5 11.4804 4.89464 11.2929 4.70711C11.1054 4.51957 11 4.26522 11 4C11 3.73478 11.1054 3.48043 11.2929 3.29289C11.4804 3.10536 11.7348 3 12 3ZM7 7H17V5H19V19H5V5H7V7Z" fill="white"/>
                        </svg>
                        Copy block id
                    </p>
            </div>

            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="editBlock()">
                    <i class="far fa-edit"></i>
                    <span class="icon-with-text">{{ 'PAGE-CONTENT.BLOCK.MENU.EDIT' | transloco }}</span>
                </button>
                <button mat-menu-item (click)="copyMe()">
                    <i class="far fa-clone"></i>
                    <span class="icon-with-text">{{ 'PAGE-CONTENT.BLOCK.MENU.COPY' | transloco }}</span>
                </button>
                <button mat-menu-item (click)="deleteMe()">
                    <i class="far fa-trash-alt"></i>
                    <span class="icon-with-text">{{ 'PAGE-CONTENT.BLOCK.MENU.DELETE' | transloco }}</span>
                </button>
            </mat-menu>
            <button mat-icon-button [matMenuTriggerFor]="menu">
                <img src="assets/svgs/blocks/menu-secondary.svg" />
            </button>
        </div>
    
        <div *ngIf="block.type !== endStoryAnchor">
            <span class="line-splitter"></span>
        </div>

        <div *ngSwitchCase="messagetype">
            <app-message-block [id]="id" [block]="block" [jsPlumb]="jsPlumb" [textMessageForm]="blockFormGroup">
            </app-message-block>
        </div>

        <div *ngSwitchCase="imagetype">
            <app-image-block [id]="id" [block]="block" [imageMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-image-block>
        </div>

        <div *ngSwitchCase="nametype">
            <app-name-block [id]="id" [block]="block" [nameMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-name-block>
        </div>

        <div *ngSwitchCase="emailtype">
            <app-email-block [id]="id" [block]="block" [emailMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-email-block>
        </div>

        <div *ngSwitchCase="phonetype">
            <app-phone-block [id]="id" [block]="block" [phoneMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-phone-block>
        </div>

        <div *ngSwitchCase="questiontype">
            <app-questions-block [id]="id" [block]="block" [questionMessageBlock]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-questions-block>
        </div>

        <div *ngSwitchCase="locationtype">
            <app-location-block [id]="id" [block]="block" [locationMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-location-block>
        </div>
        <div *ngSwitchCase="documentType">
            <app-document-block [id]="id" [block]="block" [documentMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-document-block>
        </div>

        <div *ngSwitchCase="audioType">
            <app-audio-block [id]="id" [block]="block" [audioMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-audio-block>
        </div>
        <div *ngSwitchCase="videoType">
            <app-video-block [id]="id" [block]="block" [videoMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-video-block>
        </div>
        <div *ngSwitchCase="stickerType">
            <app-sticker-block [id]="id" [block]="block" [stickerMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-sticker-block>
        </div>

        <div *ngSwitchCase="listType">
            <app-list-block [id]="id" [block]="block" [listMessageBlock]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-list-block>
        </div>
        <div *ngSwitchCase="replyType">
            <app-reply-block [id]="id" [block]="block" [replyMessageForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-reply-block>
        </div>
        <div *ngSwitchCase="jumpType">
            <app-jump-block [id]="id" [block]="block" [jumpBlockForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-jump-block>
        </div>
        <div *ngSwitchCase="failType">
            <app-fail-block [id]="id" [block]="block" [failBlockForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block"></app-fail-block>
        </div>
        <div *ngSwitchCase="imageInputType">
            <app-image-input-block [id]="id" [block]="block" [imageInputForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-image-input-block>
        </div>
        <div *ngSwitchCase="locationInputType">
            <app-location-input-block [id]="id" [block]="block" [locationInputForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-location-input-block>
        </div>
        <div *ngSwitchCase="audioInputType">
            <app-audio-input-block [id]="id" [block]="block" [audioInputForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-audio-input-block>
        </div>
        <div *ngSwitchCase="webhookType">
            <app-webhook-block [id]="id" [block]="block" [webhookForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-webhook-block>
        </div>
        <div *ngSwitchCase="openQuestiontype">
            <app-open-ended-question-block [id]="id" [block]="block" [openEndedQuestionForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-open-ended-question-block>
        </div>
        <div *ngSwitchCase="endStoryAnchor" class="outer">
                <div class="block-title-container2"> 
                    <app-end-anchor [id]="id" [block]="block" [endStoryAnchorForm]="blockFormGroup" [jsPlumb]="jsPlumb" (deleteButtonClick)="handleDeleteEndStoryAnchor($event)" class="block">
                    </app-end-anchor> 
                </div>
            </div>
        
        <div *ngSwitchCase="videoInputType">
            <app-video-input-block [id]="id" [block]="block" [videoInputForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-video-input-block>
        </div>
        <div *ngSwitchCase="keywordJumpType">
            <app-keyword-jump-block [id]="id" [block]="block" [keywordJumpBlock]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-keyword-jump-block>
        </div>
        <div *ngSwitchCase="eventType">
            <app-event-block [id]="id" [block]="block" [eventBlockForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">
            </app-event-block>
        </div>
        <div *ngSwitchCase="assessmentBrickType">
            <app-assessment-brick [id]="id" [block]="block" [assessmentBrickForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">     
            </app-assessment-brick>
        </div>
        <div *ngSwitchCase="conditionalBlockType">
            <app-conditional-block [id]="id" [block]="block" [conditionalBlockForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">     
            </app-conditional-block>
        </div>

        <div *ngSwitchCase="CMI5BlockType">
            <app-cmi5-block [id]="id" [block]="block" [CMI5BlockForm]="blockFormGroup" [jsPlumb]="jsPlumb" class="block">     
            </app-cmi5-block>
        </div>
    </div>
</mat-card>