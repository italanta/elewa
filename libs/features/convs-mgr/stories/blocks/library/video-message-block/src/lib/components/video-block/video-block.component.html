
  

<mat-card [id]="id" *ngIf="videoMessageForm">
	<mat-card-content>
		<form [formGroup]="videoMessageForm" fxLayout="column" fxLayoutALign="start center">

			<div [id]="videoInputId">
				<input (change)="processVideo($event)" type="file" accept=".mp4" [id]="videoInputUpload" hidden class="video" />
				<label [for]="videoInputUpload">
					<div *ngIf="!hasVideo; else inputHasVideo">
						<i id="icon" class="fas fa-play-circle"></i>
					</div>
					<!-- <ng-template #inputHasVideo>
						<video class="upload-video" alt="" controls autoplay>
							<source [src]="videoUrl" type="video/mp4">
						</video>
					</ng-template> -->
					<ng-template #inputHasVideo>
						<video (loadedmetadata)="isLoading = true" *ngIf="!isLoading" class="upload-video" alt="" controls autoplay (loadstart)="isLoading = true">
							<source [src]="videoUrl" type="video/mp4">
						</video>
					</ng-template>
					<div *ngIf="isLoading" class="spinner">
						<div class="spinner"></div>
					</div>
				</label>
			</div>

			<app-default-option-field [jsPlumb]="jsPlumb" [blockFormGroup]="videoMessageForm"></app-default-option-field>

			<input type="text" [placeholder]="'PAGE-CONTENT.BLOCK.PLACEHOLDER.CAPTION' | transloco" formControlName="message">
			<input type="text" [placeholder]="'PAGE-CONTENT.BLOCK.PLACEHOLDER.VIDEO-LINK' | transloco" formControlName="fileSrc">
		</form>
	</mat-card-content>
</mat-card>