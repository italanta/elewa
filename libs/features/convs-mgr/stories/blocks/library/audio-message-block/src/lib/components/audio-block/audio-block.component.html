<div class="wide" [id]="id" *ngIf="audioMessageForm">
    <form [formGroup]="audioMessageForm" fxLayout="column" fxLayoutALign="start center">

      <div [id]="audioInputId" class="audio_bg"  [ngClass]="byPassedLimits.length ? 'error' : ''">

        <div *ngIf="this.block.fileSrc && !isLoadingAudio">
            <audio controls>
                <source [src]="this.block.fileSrc!" class="audio" (click)="audioInput.click()">
            </audio>
        </div>
        <div *ngIf="isLoadingAudio" class="audio-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </div>
        <div *ngIf="!this.block.fileSrc && !isLoadingAudio" class="audio-icon" (click)="audioInput.click()">
          <img src="/assets/icons/microphone.svg" (click)="audioInput.click()"/>
      </div>
      <div>
          <input #audioInput (change)="processAudio($event)" type="file" accept=".mp3" class="fileSrc">
      </div>
  </div>
  <input
  type="text"
  formControlName="fileSrc"
  [placeholder]="'PAGE-CONTENT.BLOCK.PLACEHOLDER.AUDIO-LINK' | transloco"
  name="audio-link "
  id="audio-link "
/>
    <div class="error-message" *ngIf="whatsappLimit">
      <span>{{
        'PAGE-CONTENT.BLOCK.SIZE-LIMIT-MESSAGE.WHATSAPP.AUDIO.MESSAGE-ONE'
          | transloco
      }}</span
      ><br />
      <span>{{
        'PAGE-CONTENT.BLOCK.SIZE-LIMIT-MESSAGE.WHATSAPP.AUDIO.MESSAGE-TWO'
          | transloco
      }}</span>
    </div>
    <div class="playAudio">
      <button (click)="playAudio()" class="play">
        <img src="assets/icons/Play.svg" />
      </button>

      <div class="waveform" #waveform>
        <!-- the waveform will be rendered here -->
    </div>

      <button class="delete">
        <img src="/assets/icons/delete-x.svg" />
      </button>
    </div>
    <app-default-option-field [jsPlumb]="jsPlumb" [blockFormGroup]="audioMessageForm"></app-default-option-field>
  </form>
</div>
