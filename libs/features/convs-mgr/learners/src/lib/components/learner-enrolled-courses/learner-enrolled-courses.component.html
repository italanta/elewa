<section class="section-container">
  <h2 class="title">{{'LEARNERS.LEARNER-DETAIL-TAB.DETAILS.COURSES-ENROLLED'| transloco }}</h2>
  <div class="course-item-container">

    <div *ngIf="!isLoading; else noData">
      <div *ngIf="leanerProgress">
        <div class="course" *ngFor="let course of leanerProgress">
          <div class="course-name-wrapper" (click)="toggleCollapsible()">
            <div class="course-name-title">
              <span class="course-name-tooltip"></span>
              <p class="course-name">{{ course.name| titlecase }}</p>
            </div>
            <div class="isOpen" *ngIf="!isOpen">
              <p>View more</p>
              <i  class="fas fa-chevron-up"></i>
            </div>
            <div class="isOpen" *ngIf="isOpen">
              <p>View less</p>
              <i  class="fas fa-chevron-down"></i>
            </div>
  
          </div>

          <ng-container *ngIf="isOpen">
          <div class="enrolled-date-wrapper">
            <span>Enrolled On: {{ course.enrollmentDate | date: 'mediumDate'}}</span>
          </div>

          <ng-container *ngFor="let module of course?.modules">
            <div class="module-wrapper">
              <div class="module-title">
                <img src="assets/svgs/learners/module.svg">
                <div class="module-progress-name">{{ module.name | titlecase }}</div>
                <i class="course-name-pen fas fa-pen-square"></i>
              </div>

              <ng-container *ngFor="let lesson of module?.lessons">
                <div class="lessons-wrapper">
                  <div class="course-progress-bars">
                    <div class="course-progress-name">{{ lesson.name | titlecase }}</div>
                    <mat-progress-bar mode="determinate" [value]="lesson.progress"></mat-progress-bar>
                  </div>
                </div>
              </ng-container>
            </div>
          </ng-container>
          </ng-container>
        </div>
      </div>
    </div>

    <ng-template #noData>
      <mat-spinner *ngIf="isLoading" diameter="30"></mat-spinner>
    </ng-template>
  </div>
</section>