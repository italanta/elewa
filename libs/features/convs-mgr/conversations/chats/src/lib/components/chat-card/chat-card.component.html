<div class="card" [class.selected]="currentChat.id === chat.id" fxLayout="row" fxLayoutAlign="start center"
  fxLayoutGap="16px">
  <div class="avatar" [ngStyle]="{'background-color': chatAvatarColor }" [class.new-msg]="chat.awaitingResponse">
    <div *ngIf="!chat.name">
     <span style="color: white;">UU</span>
    </div>
    <span class="user-char" *ngIf="chat.name">{{getUserName(chat.name)}}</span>
  </div>
  <div class="text-section" fxLayout="column" fxFlex>
    <div class="top-section" fxLayout="row" fxLayoutAlign="space-between center">
      <div class="name-section">
        <div class="name-section">
          {{ chat.name || '+' + chat.phoneNumber }}
        </div>
        <div *ngIf="chat.phoneNumber && chat.name" class="name-section number">
          {{ '+' + chat.phoneNumber }}
        </div>

      </div>
      <div class="date-section" fxLayout="row" fxLayoutAlign="center center" fxFlex="30">
        <span>{{ lastMessageDate }}</span>
      </div>
    </div>
    <div class="bottom-section" fxLayout="row" fxLayoutAlign="end">
      <div *ngIf="lastMessage && getImageSource(); else textMessage" class="bottom-img" fxFlex>
        <img [src]="getImageSource()"  />
      </div>

      <ng-template #textMessage>
        <div *ngIf="lastMessage" class="bottom-txt" fxFlex>
          {{ lastMessage }}
        </div>
      </ng-template>
            
      <div fxFlexAlign="end">
        <i *ngIf="chat.awaitingResponse" class="fas fa-comment-alt new-msg"></i>
      </div>

    </div>
  </div>

</div>